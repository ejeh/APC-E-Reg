<!DOCTYPE html>
<html lang="en">
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="keywords" content="dashboard" />
    <meta name="author" content="BSCR-MIS" />
    <meta name="robots" content="index, follow" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta property="og:image" content="social-image.html" />
    <meta name="format-detection" content="telephone=no" />
    <title>BSCR-MIS - User Dashboard</title>
    <!-- Favicon icon -->
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/assets//images/gov-logo.jpg"
    />

    <link
      href="vendor/bootstrap-select/dist/css/bootstrap-select.min.css"
      rel="stylesheet"
    />
    <link href="css/style.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="../../cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script src="../../unpkg.com/sweetalert%402.1.2/dist/sweetalert.min.js"></script>
    <link href="vendor/sweetalert2/dist/sweetalert2.min.css" rel="stylesheet" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="../../ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  </head>

  <script>
    let userData = localStorage.getItem("token");
    userData = JSON.parse(userData);
    const { token, user } = userData;

    const apiuser = `${BACKEND_URL}/users/${id}`;

    $.ajax({
      type: "GET",
      url: apiuser,
      headers: {
        Authorization: `Bearer ${token}`,
      },
    }).done((res) => {
      let tab = ` 
      <thead>
        <tr>
        <th>Fullname</th>
      <th>Phone</th>
      <th>Email</th>
      <th>Role</th>
      <th>Amount</th>
      <th>Status</th>
      <th>Confirm</th>
        </tr>
       </thead>`;
      res.map((d) => {
        if (d.status === "pending") {
          return (tab += `
        <tbody>
          <tr>
            <td>${d.user.firstname} ${d.user.lastname}</td>
            <td>${d.date}</td>
            <td>${d.type}</td>
            <td>${d.pay_currency}</td>
            <td>${d.amount}</td>
            <td>${d.status}</td>
         </tr>
        </tbody>
            `);
        }
        return (tab += `
        <tbody>
          <tr>
            <td>${d.firstname} ${d.lastname}</td>
            <td>${d.phone}</td>
            <td>${d.email}</td>
            <td>${d.role}</td>
            <td>${d.amount}</td>
            <td>${d.status}</td>
         </tr>
        </tbody>
            `);
      });
      document.getElementById("history").innerHTML = tab;
    });

    function comfirmed(id) {
      if (confirm("Sure?")) {
        $.ajax({
          type: "PATCH",
          url: `${BACKEND_URL}/users/${id}`,
          headers: {
            Authorization: `Bearer ${userData.token}`,
          },
        }).done((res) => {
          console.log(res);
        });
      }
    }
  </script>
  <body>
    <!--*******************
        Preloader start
    ********************-->
    <div id="preloader">
      <div class="sk-three-bounce">
        <div class="sk-child sk-bounce1"></div>
        <div class="sk-child sk-bounce2"></div>
        <div class="sk-child sk-bounce3"></div>
      </div>
    </div>
    <!--*******************
        Preloader end
    ********************-->

    <!--**********************************
        Main wrapper start
    ***********************************-->
    <div id="main-wrapper">
      <!--**********************************
            Nav header start
        ***********************************-->
      <div class="nav-header">
        <a href="index-2.html" class="brand-logo">
          <img src="../img/agent-near-me.png" width="20%" height="auto" />

          <!-- <img src="images/dash_logo.png"> -->
        </a>

        <div class="nav-control">
          <div class="hamburger">
            <span class="line"></span><span class="line"></span
            ><span class="line"></span>
          </div>
        </div>
      </div>
      <!--**********************************
            Nav header end
        ***********************************-->

      <!--**********************************
            Header start
        ***********************************-->
      <div class="header">
        <div class="header-content">
          <nav class="navbar navbar-expand">
            <div class="collapse navbar-collapse justify-content-between">
              <div class="header-left">
                <div class="dashboard_bar">Transaction History</div>
              </div>
              <ul class="navbar-nav header-right">
                <li class="nav-item dropdown notification_dropdown">
                  <div class="input-group search-area">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Search here..."
                    />
                    <span class="input-group-text"
                      ><a href="javascript:void(0)"
                        ><i class="flaticon-381-search-2"></i></a
                    ></span>
                  </div>
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
      <!--**********************************
            Header end ti-comment-alt
        ***********************************-->

      <!--**********************************
            Sidebar start
        ***********************************-->
      <div class="deznav">
        <div class="deznav-scroll">
          <ul class="metismenu" id="menu">
            <li>
              <style type="text/css">
                a.gflag {
                  vertical-align: middle;
                  font-size: 16px;
                  padding: 1px 0;
                  background-repeat: no-repeat;
                  background-image: url(../../gtranslate.net/flags/16.png);
                }
                a.gflag img {
                  border: 0;
                }
                a.gflag:hover {
                  background-image: url(../../gtranslate.net/flags/16a.png);
                }
                #goog-gt-tt {
                  display: none !important;
                }
                .goog-te-banner-frame {
                  display: none !important;
                }
                .goog-te-menu-value:hover {
                  text-decoration: none !important;
                }
                body {
                  top: 0 !important;
                }
                #google_translate_element2 {
                  display: none !important;
                }
              </style>

              <br /><select onchange="doGTranslate(this);">
                <option value="">Select Language</option>
                <option value="en|zh-CN">Chinese (Simplified)</option>
                <option value="en|zh-TW">Chinese (Traditional)</option>
                <option value="en|en">English</option>
              </select>
              <div id="google_translate_element2"></div>
              <script type="text/javascript">
                function googleTranslateElementInit2() {
                  new google.translate.TranslateElement(
                    { pageLanguage: "en", autoDisplay: false },
                    "google_translate_element2"
                  );
                }
              </script>
              <script
                type="text/javascript"
                src="//translate.google.com/translate_a/element7876.js?cb=googleTranslateElementInit2"
              ></script>
              <script
                type="text/javascript"
                src="../../translate.google.com/translate_a/element7876.js?cb=googleTranslateElementInit2"
              ></script>

              <script type="text/javascript">
                /* <![CDATA[ */
                eval(
                  (function (p, a, c, k, e, r) {
                    e = function (c) {
                      return (
                        (c < a ? "" : e(parseInt(c / a))) +
                        ((c = c % a) > 35
                          ? String.fromCharCode(c + 29)
                          : c.toString(36))
                      );
                    };
                    if (!"".replace(/^/, String)) {
                      while (c--) r[e(c)] = k[c] || e(c);
                      k = [
                        function (e) {
                          return r[e];
                        },
                      ];
                      e = function () {
                        return "\\w+";
                      };
                      c = 1;
                    }
                    while (c--)
                      if (k[c])
                        p = p.replace(
                          new RegExp("\\b" + e(c) + "\\b", "g"),
                          k[c]
                        );
                    return p;
                  })(
                    "6 7(a,b){n{4(2.9){3 c=2.9(\"o\");c.p(b,f,f);a.q(c)}g{3 c=2.r();a.s('t'+b,c)}}u(e){}}6 h(a){4(a.8)a=a.8;4(a=='')v;3 b=a.w('|')[1];3 c;3 d=2.x('y');z(3 i=0;i<d.5;i++)4(d[i].A=='B-C-D')c=d[i];4(2.j('k')==E||2.j('k').l.5==0||c.5==0||c.l.5==0){F(6(){h(a)},G)}g{c.8=b;7(c,'m');7(c,'m')}}",
                    43,
                    43,
                    "||document|var|if|length|function|GTranslateFireEvent|value|createEvent||||||true|else|doGTranslate||getElementById|google_translate_element2|innerHTML|change|try|HTMLEvents|initEvent|dispatchEvent|createEventObject|fireEvent|on|catch|return|split|getElementsByTagName|select|for|className|goog|te|combo|null|setTimeout|500".split(
                      "|"
                    ),
                    0,
                    {}
                  )
                );
                /* ]]> */
              </script>
            </li>
            <li>
              <a class="ai-icon" href="index-2.html" aria-expanded="false">
                <i class="flaticon-381-networking"></i>
                <span class="nav-text">Dashboard</span>
              </a>
            </li>
            <!-- <li>
              <a class="ai-icon" href="deposit.html" aria-expanded="false">
                <i class="fa fa-money" aria-hidden="true"></i>
                <span class="nav-text">Fund Account</span>
              </a>
            </li>
            <li>
              <a class="ai-icon" href="exchange.html" aria-expanded="false">
                <i class="fa fa-exchange" aria-hidden="true"></i>
                <span class="nav-text">Exchange</span>
              </a>
            </li>
            <li>
              <a class="ai-icon" href="withdrawal.html" aria-expanded="false">
                <i class="fa fa-money" aria-hidden="true"></i>
                <span class="nav-text">Withdrawal</span>
              </a>
            </li> -->
            <li>
              <a class="ai-icon" href="citizens.html" aria-expanded="false">
                <i class="fa fa-arrows-h"></i>
                <span class="nav-text">History</span>
              </a>
            </li>
            <!-- <li>
              <a class="ai-icon" href="referrals.html" aria-expanded="false">
                <i class="fa fa-user-plus" aria-hidden="true"></i>
                <span class="nav-text">Referrals</span>
              </a>
            </li>
            <li>
              <a class="ai-icon" href="kyc.html" aria-expanded="false">
                <i class="fa fa-hand-o-right"></i>
                <span class="nav-text">Account Verification</span>
              </a>
            </li> -->
            <li>
              <a class="ai-icon" href="profile.html" aria-expanded="false">
                <i class="fa fa-user" aria-hidden="true"></i>
                <span class="nav-text">User Account</span>
              </a>
            </li>
            <li>
              <a class="ai-icon" href="/auth/login.html" aria-expanded="false">
                <i class="fa fa-sign-out" aria-hidden="true"></i>
                <span class="nav-text">Logout</span>
              </a>
            </li>
          </ul>
          <div class="copyright">
            <p>BSCR-MIS<br />© 2023 All Rights Reserved</p>
            <p class="op5"></p>
          </div>
        </div>
      </div>
      <!--**********************************
            Sidebar end
        ***********************************-->

      <!--**********************************
            Content body start
        ***********************************-->
      <div class="content-body">
        <div class="container-fluid">
          <div class="row">
            <div class="col-xl-12">
              <div class="filter cm-content-box box-primary mt-5">
                <div class="cm-content-body form excerpt">
                  <div class="card-body">
                    <div
                      class="table-responsive"
                      data-pattern="priority-columns"
                    >
                      <table
                        id="history"
                        class="table table-small-font mb-10 table-bordered table-striped"
                      ></table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- <script
          src="../../code.tidio.co_443/bpnp4xkz2axqrebqxcezgdca9yot1iyn.js"
          async
        ></script> -->
      </div>
      <!--**********************************
            Content body end
        ***********************************-->

      <!--**********************************
            Footer start
        ***********************************-->
      <div class="footer">
        <div class="copyright">
          <p>Copyright © BSCR-MIS 2024</p>
        </div>
      </div>
      <!--**********************************
            Footer end
        ***********************************-->

      <!--**********************************
           Support ticket button start
        ***********************************-->

      <!--**********************************
           Support ticket button end
        ***********************************-->
    </div>
    <!--**********************************
        Main wrapper end
    ***********************************-->
    <!-- <script
      src="../../code.tidio.co_443/bpnp4xkz2axqrebqxcezgdca9yot1iyn.js"
      async
    ></script> -->
    <!--**********************************
        Scripts
    ***********************************-->
    <!-- Required vendors -->
    <script src="vendor/sweetalert2/dist/sweetalert2.min.js"></script>
    <script src="js/plugins-init/sweetalert.init.js"></script>
    <script src="vendor/global/global.min.js"></script>
    <script src="vendor/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
    <script src="vendor/chart.js/Chart.bundle.min.js"></script>
    <script src="vendor/bootstrap-datetimepicker/js/moment.js"></script>
    <script src="vendor/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>

    <script src="js/dashboard/dashboard-1.js"></script>

    <script src="js/custom.min.js"></script>
    <script src="js/deznav-init.js"></script>
    <script src="js/demo.js"></script>
    <script type="text/javascript" src="/js/index.js"></script>
  </body>
</html>
